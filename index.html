<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To do list</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="heading display-5">My To Do App</div>
        <form class="">
            <input type="text" class="todo-input" placeholder="Add Tasks">
            <button class="todo-btn btn btn-info align-middle" type="submit"><span class="addbtn material-icons">add_circle</span></button>
        </form>
        <div class="links-list">
            <div class="links selected">All</div>
            <div class="links">Completed</div>
            <div class="links">Todo</div>
        </div>
        <div class="todo-container text-center">
            <ul class="todo-list"></ul>
        </div>
    </div>
    <script>
        const todoInput = document.querySelector(".todo-input"); 
        const todobtn = document.querySelector(".todo-btn");
        const todolist = document.querySelector(".todo-list");
        let links = document.querySelectorAll(".links");


        for(let link of links){
            link.addEventListener('click',filterTasks);
        }
        todobtn.addEventListener('click',addTodo);
        todolist.addEventListener('click',deleteComplete);
        function filterTasks(e){
           let item = e.target;
           let val = item.innerText;
           const todos = todolist.childNodes;
           for(let link of links){
               if(link.classList.contains("selected")){
                   link.classList.remove("selected");
                   break;
               }
           }
           console.log(todos);
           todos.forEach(function(todo){
               console.log(todo);
                if(val==="All"){
                    todo.style.display = 'flex';
                }
                else if(val==="Completed"){
                    if(todo.classList.contains('complete')){
                        todo.style.display = 'flex';
                    }
                    else{
                        todo.style.display = 'none';
                    }
                }
                else{
                    if(!todo.classList.contains('complete')){
                        todo.style.display = 'flex';
                    }
                    else{
                        todo.style.display = 'none';
                    }
                }
           });
           item.classList.add("selected");
        }
        function deleteComplete(e){
            let ele = e.target;
            if(ele.classList[0]==="delete-btn"){
                const todo = ele.parentElement;
                // console.log(todo);
                todo.classList.add("fall");
                todo.addEventListener('transitionend',function(){
                    todo.remove();
                });
            }
            else if(ele.classList[0] === "check-btn"){
                const todo = ele.parentElement;
                todo.classList.toggle("complete");
            }
        }
        function addTodo(e){
            e.preventDefault();
            if(todoInput.value == ''){
                alert("Please enter a task");
            }
            else{
                const todoDiv = document.createElement("div");
                todoDiv.classList.add("todo");
                const li = document.createElement('li');
                li.innerText = todoInput.value;
                li.classList.add("todo-item");
                todoDiv.appendChild(li);
                const deleteBtn = document.createElement('button');
                deleteBtn.classList.add("delete-btn");
                deleteBtn.classList.add("material-icons");
                deleteBtn.innerHTML = `delete`;
                const checkBtn = document.createElement('button');
                checkBtn.classList.add("check-btn");
                checkBtn.classList.add("material-icons");
                checkBtn.innerHTML = `done`;
                todoDiv.appendChild(checkBtn);
                todoDiv.appendChild(deleteBtn);
                todolist.appendChild(todoDiv);
                document.querySelector(".todo-input").value = ''; 
            }
        }

    
    </script>
</body>
</html>